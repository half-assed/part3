(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var s=t(0),o=t(1),r=t.n(o),c=t(14),a=t.n(c),i=(t(20),t(4)),u=t(3),l=t.n(u),d=function(e){return Object(s.jsx)("div",{children:e.persons.filter((function(n){return n.name.toLowerCase().includes(e.myFilter.toLowerCase())})).map((function(n){return Object(s.jsxs)("p",{children:[n.name," - ",n.number," ",Object(s.jsx)("button",{onClick:function(){return function(n){console.log("Deleter props: ",n),window.confirm("Delete ".concat(n.name,"?"))&&l.a.delete("/persons/".concat(n.id));e.setPersons(e.persons.filter((function(e){if(e.id!==n.id)return e})))}(n)},children:"delete"})]})}))})},b={getAll:function(e){return console.log(e),l.a.get("http://localhost:3001/persons").then((function(e){return e.data}))},create:function(e){return console.log("Server Create props: ",e),l.a.post("http://localhost:3001/persons",{name:e[0],number:e[1]}).then((function(e){return e.data}))},update:function(e){return console.log("Server Update props: ",e),l.a.put("http://localhost:3001/persons/".concat(e[0]),{name:e[1],number:e[2]}).then((function(e){return e.data}))}},j=function(e){console.log("Notification props:",e);if(null===e||null===e.message)return null;var n=e.message[0];return!1===e.message[1]?Object(s.jsx)("div",{style:{color:"red",fontStyle:"italic",fontSize:16,border:1,borderStyle:"solid"},children:n}):Object(s.jsx)("div",{style:{color:"green",fontStyle:"italic",fontSize:16,border:1,borderStyle:"solid"},children:n})},f=function(e){return Object(s.jsxs)("div",{children:[Object(s.jsxs)("form",{children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:e.newName,onChange:function(n){return e.setNa(n.target.value)}})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:e.newNumber,onChange:function(n){return e.setNu(n.target.value)}})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",value:"",onClick:function(n){n.preventDefault(),console.log("Person form props.persons: ",e.persons);var t=e.persons.map((function(e){return e.name})).indexOf(e.newName);if(console.log("Index is:",t),""===e.newName||""===e.newNumber)alert("Fields cannot be left empty.");else if(-1!==t){if(window.confirm("".concat(e.persons[t].name," is already added to phonebook, replace the old number with a new one?"))){var s=e.persons[t];console.log("props.persons[index] (person):",e.persons[t]),b.update([s.id,s.name,e.newNumber]).then((function(n){e.setP(e.persons.map((function(t){return t.name!==e.newName?t:n}))),e.setMessage(["".concat(n.name," number has been updated"),!0]),setTimeout((function(){return e.setMessage(null)}),5e3)})).catch(e.setMessage(["Information of ".concat(e.persons[t].name," has already been removed from server"),!1]),setTimeout((function(){return e.setMessage(null)}),1e4)),e.setNa(""),e.setNu("")}}else console.log("server",b),b.create([e.newName,e.newNumber]).then((function(n){e.setP(e.persons.concat(n)),e.setMessage(["".concat(n.name," has been added"),!0]),setTimeout((function(){return e.setMessage(null)}),5e3)})),e.setNa(""),e.setNu("")},children:"add"})})]}),Object(s.jsx)(j,{message:e.message})]})},p=function(e){return Object(s.jsx)("form",{children:Object(s.jsxs)("div",{children:["filter names containing: ",Object(s.jsx)("input",{value:e.filter,onChange:function(n){return e.setter(n.target.value)}})]})})},m=function(){var e=Object(o.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(""),a=Object(i.a)(c,2),u=a[0],b=a[1],j=Object(o.useState)(""),m=Object(i.a)(j,2),h=m[0],g=m[1],O=Object(o.useState)(""),v=Object(i.a)(O,2),x=v[0],w=v[1],N=Object(o.useState)([null,null]),S=Object(i.a)(N,2),y=S[0],C=S[1];return Object(o.useEffect)((function(){var e=l.a.get("http://localhost:3001/persons");console.log("Promise",e),e.then((function(e){return r(e.data)}))}),[]),Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(p,{filter:x,setter:w}),Object(s.jsx)("h3",{children:"Add new contact"}),Object(s.jsx)(f,{persons:t,newName:u,newNumber:h,setP:r,setNa:b,setNu:g,message:y,setMessage:C}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(d,{persons:t,myFilter:x,setPersons:r})]})},h=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,40)).then((function(n){var t=n.getCLS,s=n.getFID,o=n.getFCP,r=n.getLCP,c=n.getTTFB;t(e),s(e),o(e),r(e),c(e)}))};a.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(m,{})}),document.getElementById("root")),h()}},[[39,1,2]]]);
//# sourceMappingURL=main.792ad130.chunk.js.map